<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-w3emc: w3nogds.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-w3emc
   &#160;<span id="projectnumber">2.9.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('w3nogds_8f.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">w3nogds.f File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Make a complete grib message.  
<a href="#details">More...</a></p>

<p><a href="w3nogds_8f_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a9fee3e95f39d96f49f71d4fe1a681e6a"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="w3nogds_8f.html#a9fee3e95f39d96f49f71d4fe1a681e6a">w3nogds</a> (ITYPE, FLD, IFLD, IBITL, IPFLAG, ID, PDS, IGFLAG, IGRID, IGDS, ICOMP, IBFLAG, IBMAP, IBLEN, IBDSFL, NPTS, KBUF, ITOT, JERR)</td></tr>
<tr class="memdesc:a9fee3e95f39d96f49f71d4fe1a681e6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a complete grib message from a user supplied array of floating point or integer data.  <a href="w3nogds_8f.html#a9fee3e95f39d96f49f71d4fe1a681e6a">More...</a><br /></td></tr>
<tr class="separator:a9fee3e95f39d96f49f71d4fe1a681e6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Make a complete grib message. </p>
<dl class="section author"><dt>Author</dt><dd>Farley </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1997-02-24 </dd></dl>

<p class="definition">Definition in file <a class="el" href="w3nogds_8f_source.html">w3nogds.f</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a9fee3e95f39d96f49f71d4fe1a681e6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fee3e95f39d96f49f71d4fe1a681e6a">&#9670;&nbsp;</a></span>w3nogds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine w3nogds </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ITYPE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(*)&#160;</td>
          <td class="paramname"><em>FLD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>IFLD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IBITL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IPFLAG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character * 1, dimension(*)&#160;</td>
          <td class="paramname"><em>PDS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IGFLAG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IGRID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>IGDS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ICOMP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IBFLAG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>IBMAP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IBLEN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>IBDSFL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>NPTS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character * 1, dimension(*)&#160;</td>
          <td class="paramname"><em>KBUF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ITOT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>JERR</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes a complete grib message from a user supplied array of floating point or integer data. </p>
<p>The user has the option of supplying the pds or an integer array that will be used to create a pds (with <a class="el" href="w3fi68_8f.html#a627b0d3ff494874dd3fb243e39cfa991" title="Converts an array of 25, or 27 integer words into a grib product definition section (pds) of 28 bytes...">w3fi68()</a>). The user must also supply other necessary info; see usage section below.</p>
<h3><a class="anchor" id="autotoc_md81"></a>
Program History Log:</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Date </th><th class="markdownTableHeadNone">Programmer </th><th class="markdownTableHeadNone">Comment  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1997-02-24 </td><td class="markdownTableBodyNone">M. Farley </td><td class="markdownTableBodyNone">Modified <a class="el" href="w3fi72_8f.html#aaac6e022f341c919316466672ef3e70c" title="Makes a complete GRIB message from a user supplied array of floating point or integer data.">w3fi72()</a> - this routine allows for no gds (errors in w3fi71 for grib grids 21-26, 61-64 forced the need for this routine).  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1998-06-24 </td><td class="markdownTableBodyNone">Stephen Gilbert </td><td class="markdownTableBodyNone">Added number of gridpoint values for grids 61-64, needed when igflag=2 ( no gds ).  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1998-12-21 </td><td class="markdownTableBodyNone">Stephen Gilbert </td><td class="markdownTableBodyNone">Replaced function ichar with mova2i.  </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ITYPE</td><td>0 = Floating point data supplied in array 'fld' 1 = Data supplied in array 'ifld' </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">FLD</td><td>Array of data (at proper gridpoints) to be converted to grib format if itype=0. see remarks #1 &amp; 2. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IFLD</td><td>Array of data (at proper gridpoints) to be converted to grib format if itype=1. see remarks #1 &amp; 2. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IBITL</td><td>0 = Computer computes length for packing data from power of 2 (number of bits) best fit of data using 'variable' bit packer w3fi58. 8, 12, etc. computer rescales data to fit into that 'fixed' number of bits using w3fi59. see remarks #3. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IPFLAG</td><td>0 = Make pds from user supplied array (id) 1 = user supplying pds note: if pds is greater than 30, use iplfag=1. the user could call w3fi68 before he calls w3nogds. this would make the first 30 bytes of the pds, user then would make bytes after 30. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ID</td><td>Array of values that w3fi68 will use to make an edition 1 pds if ipflag=0. (see the docblock for w3fi68 for layout of array) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">PDS</td><td>Array of values (valid pds supplied by user) if ipflag=1. length may exceed 28 bytes (contents of bytes beyond 28 are passed through unchanged). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IGFLAG</td><td>0 = Make gds based on 'igrid' value. 1 = make gds from user supplied info in 'igds' and 'igrid' value. see remarks #4. 2 = no gds will be included...for international grids *** this is an exception to remarks #4!!!! </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IGRID</td><td># = Grid identification (table b) 255 = if user defined grid; igds must be supplied and igflag must =1. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IGDS</td><td>Array containing user gds info (same format as supplied by w3fi71 - see dockblock for layout) if igflag=1. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ICOMP</td><td>Resolution and component flag for bit 5 of gds(17) 0 = earth oriented winds 1 = grid oriented winds </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IBFLAG</td><td>0 = Make bit map from user supplied data<ul>
<li># = bit map predefined by center see remarks #5. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IBMAP</td><td>Array containing bit map </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IBLEN</td><td>Length of bit map will be used to verify length of field (error if it doesn't match). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IBDSFL</td><td>Array containing table 11 flag info bds octet 4: (1) 0 = grid point data 1 = spherical harmonic coefficients (2) 0 = simple packing 1 = second order packing (3) ... same value as 'itype' 0 = original data were floating point values 1 = original data were integer values (4) 0 = no additional flags at octet 14 1 = octet 14 contains flag bits 5-12 (5) 0 = reserved - always set to 0 byte 6 option 1 not available (as of 5-16-93) (6) 0 = single datum at each grid point 1 = matrix of values at each grid point byte 7 option 0 with second order packing n/a (as of 5-16-93) (7) 0 = no secondary bit maps 1 = secondary bit maps present (8) 0 = second order values have constant width 1 = second order values have different widths </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">NPTS</td><td>Number of gridpoints in array fld or ifld </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">KBUF</td><td>Entire grib message ('grib' to '7777') equivalence to integer array to make sure it is on word bounary. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ITOT</td><td>Total length of grib message in bytes </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">JERR</td><td>=:<ul>
<li>0, Completed making grib field without error</li>
<li>1, Ipflag not 0 or 1</li>
<li>2, Igflag not 0 or 1 or 2</li>
<li>3, Error converting ieee f.p. number to ibm370 f.p.</li>
<li>4, W3fi71 error/igrid not defined</li>
<li>5, W3fk74 error/grid representation type not valid</li>
<li>6, Grid too large for packer dimension arrays see automation division for revision!</li>
<li>7, Length of bit map not equal to size of fld/ifld</li>
<li>8, W3fi73 error, all values in ibmap are zero</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>1 If bit map to be included in message, null data should be included in fld or ifld. this routine will take care of 'discarding' any null data based on the bit map.</li>
<li>2 Units must be those in grib documentation: nmc o.n. 388 or wmo publication 306.</li>
<li>3 In either case, input numbers will be multiplied by '10 to the nth' power found in id(25) or pds(27-28), the d-scaling factor, prior to binary packing.</li>
<li>4 All nmc produced grib fields will have a grid definition section included in the grib message. id(6) will be set to '1'.</li>
<li>gds will be built based on grid number (igrid), unless igflag=1 (user supplying igds). user must still supply igrid even if igds provided.</li>
<li>5 If bit map used then id(7) or pds(8) must indicate the presence of a bit map.</li>
<li>6 Array kbuf should be equivalenced to an integer value or array to make sure it is on a word boundary.</li>
<li>7 Subprogram can be called from a multiprocessing environment. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="w3nogds_8f_source.html#l00125">125</a> of file <a class="el" href="w3nogds_8f_source.html">w3nogds.f</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="w3nogds_8f.html">w3nogds.f</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
